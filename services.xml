<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <service id="spec_gatherer" class="Civi\Api4\Service\Spec\SpecGatherer"/>

        <service id="schema_map_builder" class="Civi\Api4\Service\Schema\SchemaMapBuilder" public="false">
            <argument type="service" id="dispatcher" />
        </service>

        <!-- factory service is deprecated but for now we're stuck with v2.5 -->
        <service id="schema_map" class="Civi\Api4\Service\Schema\SchemaMap" factory-service="schema_map_builder" factory-method="build"/>

        <service id="joiner" class="Civi\Api4\Service\Schema\Joiner">
            <argument type="service" id="schema_map"/>
        </service>

        <service id="contact_creation.spec_provider" class="Civi\Api4\Service\Spec\Provider\ContactCreationSpecProvider">
            <tag name="spec_provider"/>
        </service>

        <service class="Civi\Api4\Service\Spec\Provider\ActivityCreationSpecProvider">
            <tag name="spec_provider"/>
        </service>

        <service class="Civi\Api4\Service\Spec\Provider\ContributionCreationSpecProvider">
            <tag name="spec_provider"/>
        </service>

        <service class="Civi\Api4\Service\Spec\Provider\CustomGroupCreationSpecProvider">
            <tag name="spec_provider"/>
        </service>

        <service class="Civi\Api4\Service\Spec\Provider\EntityTagCreationSpecProvider">
            <tag name="spec_provider"/>
        </service>

        <service id="custom_group.pre_creation.subscriber" class="Civi\Api4\Event\Subscriber\CustomGroupPreCreationSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="custom_field.pre_creation.subsciber" class="Civi\Api4\Event\Subscriber\CustomFieldPreCreationSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="null_value.pre_creation.subscriber" class="Civi\Api4\Event\Subscriber\NullValueFormattingPreCreationSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="contact.pre_update.subscriber" class="Civi\Api4\Event\Subscriber\ContactPreUpdateSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="option_value.pre_creation.subscriber" class="Civi\Api4\Event\Subscriber\OptionValuePreCreationSubscriber">
            <tag name="event_subscriber"/>
            <argument type="service" id="option_group.api"/>
        </service>

        <service id="activity.pre_creation.subscriber" class="Civi\Api4\Event\Subscriber\ActivityPreCreationSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="contact.schema_map.subscriber" class="Civi\Api4\Event\Subscriber\ContactSchemaMapSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="activity.schema_map.subscriber" class="Civi\Api4\Event\Subscriber\ActivitySchemaMapSubscriber">
            <tag name="event_subscriber"/>
        </service>

        <service id="api4.kernel" class="Civi\Api4\ApiKernel">
            <argument type="service" id="dispatcher"/>
        </service>

    </services>

</container>
