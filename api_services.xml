<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <!-- Base Actions -->
        <service id="standard.get_handler" class="Civi\Api4\Handler\GetHandler"/>
        <service id="standard.create_handler" class="Civi\Api4\Handler\CreationHandler"/>
        <service id="standard.delete_handler" class="Civi\Api4\Handler\DeletionHandler"/>
        <service id="standard.get_fields_handler" class="Civi\Api4\Handler\GetFieldsHandler">
            <argument type="service" id="spec_gatherer"/>
        </service>

        <!-- Override Actions -->
        <service id="address.creation_handler" class="Civi\Api4\Handler\Address\AddressCreationHandler"/>
        <service id="entity_tag.creation_handler" class="Civi\Api4\Handler\EntityTag\EntityTagCreationHandler"/>
        <service id="entity.get_handler" class="Civi\Api4\Handler\Entity\EntityGetHandler">
            <argument type="service" id="entity_register"/>
        </service>

        <!-- API Entities -->
        <service abstract="true" id="abstract.api" class="Civi\Api4\Api">
            <argument type="service" id="api4.kernel"/>
            <argument type="string">AbstractApi</argument>
            <argument type="collection"/>
        </service>

        <service id="contact.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Contact</argument>
        </service>

        <service id="custom_group.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">CustomGroup</argument>
        </service>

        <service id="custom_field.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">CustomField</argument>
        </service>

        <service id="activity.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Activity</argument>
        </service>

        <service id="location_type.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">LocationType</argument>
        </service>

        <service id="option_group.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">OptionGroup</argument>
        </service>

        <service id="option_value.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">OptionValue</argument>
        </service>

        <service id="tag.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Tag</argument>
        </service>

        <service id="phone.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Phone</argument>
        </service>

        <service id="event.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Event</argument>
        </service>

        <service id="entity_tag.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">EntityTag</argument>
            <argument index="2" type="collection">
                <argument type="service" id="entity_tag.creation_handler"/>
            </argument>
        </service>

        <!-- Override the creation handler -->
        <service id="address.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Address</argument>
            <argument index="2" type="collection">
                <argument type="service" id="address.creation_handler"/>
            </argument>
        </service>

        <service id="email.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Email</argument>
        </service>

        <service id="participant.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="true"/>
            <argument index="1">Participant</argument>
        </service>

        <!-- Non-standard API with only "get" action -->
        <service id="entity.api" class="Civi\Api4\Api" parent="abstract.api">
            <tag name="api" standard="false"/>
            <argument index="1">Entity</argument>
            <argument index="2" type="collection">
                <argument type="service" id="entity.get_handler"/>
            </argument>
        </service>

    </services>

</container>
